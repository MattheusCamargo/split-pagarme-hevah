(()=>{var e={776:(e,t,n)=>{"use strict";var a=n(143);function r(){}function s(){}s.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,s,o){if(o!==a){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:r};return n.PropTypes=n,n}},268:(e,t,n)=>{e.exports=n(776)()},143:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},748:(e,t,n)=>{e.exports=n(696)},696:(e,t,n)=>{"use strict";var a,r=(a=n(280))&&"object"==typeof a&&"default"in a?a.default:a,s=n(34);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var l=function(e,t,n,a,r,s,o,i){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,a,r,s,o,i],c=0;(l=new Error(t.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}};function u(e,t,n){if("selectionStart"in e&&"selectionEnd"in e)e.selectionStart=t,e.selectionEnd=n;else{var a=e.createTextRange();a.collapse(!0),a.moveStart("character",t),a.moveEnd("character",n-t),a.select()}}var c={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"};function p(e,t,n){var a="",r="",s=null,o=[];if(void 0===t&&(t="_"),null==n&&(n=c),!e||"string"!=typeof e)return{maskChar:t,formatChars:n,mask:null,prefix:null,lastEditablePosition:null,permanents:[]};var i=!1;return e.split("").forEach((function(e){i=!i&&"\\"===e||(i||!n[e]?(o.push(a.length),a.length===o.length-1&&(r+=e)):s=a.length+1,a+=e,!1)})),{maskChar:t,formatChars:n,prefix:r,mask:a,lastEditablePosition:s,permanents:o}}function d(e,t){return-1!==e.permanents.indexOf(t)}function m(e,t,n){var a=e.mask,r=e.formatChars;if(!n)return!1;if(d(e,t))return a[t]===n;var s=r[a[t]];return new RegExp(s).test(n)}function f(e,t){return t.split("").every((function(t,n){return d(e,n)||!m(e,n,t)}))}function h(e,t){var n=e.maskChar,a=e.prefix;if(!n){for(;t.length>a.length&&d(e,t.length-1);)t=t.slice(0,t.length-1);return t.length}for(var r=a.length,s=t.length;s>=a.length;s--){var o=t[s];if(!d(e,s)&&m(e,s,o)){r=s+1;break}}return r}function v(e,t){return h(e,t)===e.mask.length}function g(e,t){var n=e.maskChar,a=e.mask,r=e.prefix;if(!n){for((t=b(e,"",t,0)).length<r.length&&(t=r);t.length<a.length&&d(e,t.length);)t+=a[t.length];return t}if(t)return b(e,g(e,""),t,0);for(var s=0;s<a.length;s++)d(e,s)?t+=a[s]:t+=n;return t}function b(e,t,n,a){var r=e.mask,s=e.maskChar,o=e.prefix,i=n.split(""),l=v(e,t);return!s&&a>t.length&&(t+=r.slice(t.length,a)),i.every((function(n){for(;c=n,d(e,u=a)&&c!==r[u];){if(a>=t.length&&(t+=r[a]),i=n,s&&d(e,a)&&i===s)return!0;if(++a>=r.length)return!1}var i,u,c;return!m(e,a,n)&&n!==s||(a<t.length?t=s||l||a<o.length?t.slice(0,a)+n+t.slice(a+1):(t=t.slice(0,a)+n+t.slice(a),g(e,t)):s||(t+=n),++a<r.length)})),t}function k(e,t){for(var n=e.mask,a=t;a<n.length;++a)if(!d(e,a))return a;return null}function w(e){return e||0===e?e+"":""}function S(e){return"function"==typeof e}function C(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame}function y(e){return(C()?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame:function(){return setTimeout(e,1e3/60)})(e)}function I(e){(C()||clearTimeout)(e)}var E=function(e){function t(t){var n=e.call(this,t)||this;n.focused=!1,n.mounted=!1,n.previousSelection=null,n.selectionDeferId=null,n.saveSelectionLoopDeferId=null,n.saveSelectionLoop=function(){n.previousSelection=n.getSelection(),n.saveSelectionLoopDeferId=y(n.saveSelectionLoop)},n.runSaveSelectionLoop=function(){null===n.saveSelectionLoopDeferId&&n.saveSelectionLoop()},n.stopSaveSelectionLoop=function(){null!==n.saveSelectionLoopDeferId&&(I(n.saveSelectionLoopDeferId),n.saveSelectionLoopDeferId=null,n.previousSelection=null)},n.getInputDOMNode=function(){if(!n.mounted)return null;var e=s.findDOMNode(i(i(n))),t="undefined"!=typeof window&&e instanceof window.Element;if(e&&!t)return null;if("INPUT"!==e.nodeName&&(e=e.querySelector("input")),!e)throw new Error("react-input-mask: inputComponent doesn't contain input node");return e},n.getInputValue=function(){var e=n.getInputDOMNode();return e?e.value:null},n.setInputValue=function(e){var t=n.getInputDOMNode();t&&(n.value=e,t.value=e)},n.setCursorToEnd=function(){var e=h(n.maskOptions,n.value),t=k(n.maskOptions,e);null!==t&&n.setCursorPosition(t)},n.setSelection=function(e,t,a){void 0===a&&(a={});var r=n.getInputDOMNode(),s=n.isFocused();r&&s&&(a.deferred||u(r,e,t),null!==n.selectionDeferId&&I(n.selectionDeferId),n.selectionDeferId=y((function(){n.selectionDeferId=null,u(r,e,t)})),n.previousSelection={start:e,end:t,length:Math.abs(t-e)})},n.getSelection=function(){return function(e){var t=0,n=0;if("selectionStart"in e&&"selectionEnd"in e)t=e.selectionStart,n=e.selectionEnd;else{var a=document.selection.createRange();a.parentElement()===e&&(t=-a.moveStart("character",-e.value.length),n=-a.moveEnd("character",-e.value.length))}return{start:t,end:n,length:n-t}}(n.getInputDOMNode())},n.getCursorPosition=function(){return n.getSelection().start},n.setCursorPosition=function(e){n.setSelection(e,e)},n.isFocused=function(){return n.focused},n.getBeforeMaskedValueChangeConfig=function(){var e=n.maskOptions,t=e.mask,a=e.maskChar,r=e.permanents,s=e.formatChars;return{mask:t,maskChar:a,permanents:r,alwaysShowMask:!!n.props.alwaysShowMask,formatChars:s}},n.isInputAutofilled=function(e,t,a,r){var s=n.getInputDOMNode();try{if(s.matches(":-webkit-autofill"))return!0}catch(e){}return!n.focused||r.end<a.length&&t.end===e.length},n.onChange=function(e){var t=i(i(n)).beforePasteState,a=i(i(n)).previousSelection,r=n.props.beforeMaskedValueChange,s=n.getInputValue(),o=n.value,l=n.getSelection();n.isInputAutofilled(s,l,o,a)&&(o=g(n.maskOptions,""),a={start:0,end:0,length:0}),t&&(a=t.selection,o=t.value,l={start:a.start+s.length,end:a.start+s.length,length:0},s=o.slice(0,a.start)+s+o.slice(a.end),n.beforePasteState=null);var u=function(e,t,n,a,r){var s=e.mask,o=e.prefix,i=e.lastEditablePosition,l=t,u="",c=0,p=0,f=Math.min(r.start,n.start);return n.end>r.start?p=(c=function(e,t,n,a){var r=e.mask,s=e.maskChar,o=n.split(""),i=a;return o.every((function(t){for(;o=t,d(e,n=a)&&o!==r[n];)if(++a>=r.length)return!1;var n,o;return(m(e,a,t)||t===s)&&a++,a<r.length})),a-i}(e,0,u=l.slice(r.start,n.end),f))?r.length:0:l.length<a.length&&(p=a.length-l.length),l=a,p&&(1!==p||r.length||(f=r.start===n.start?k(e,n.start):function(e,t){for(var n=t;0<=n;--n)if(!d(e,n))return n;return null}(e,n.start)),l=function(e,t,n,a){var r=n+a,s=e.maskChar,o=e.mask,i=e.prefix,l=t.split("");if(s)return l.map((function(t,a){return a<n||r<=a?t:d(e,a)?o[a]:s})).join("");for(var u=r;u<l.length;u++)d(e,u)&&(l[u]="");return n=Math.max(i.length,n),l.splice(n,r-n),t=l.join(""),g(e,t)}(e,l,f,p)),l=b(e,l,u,f),(f+=c)>=s.length?f=s.length:f<o.length&&!c?f=o.length:f>=o.length&&f<i&&c&&(f=k(e,f)),u||(u=null),{value:l=g(e,l),enteredString:u,selection:{start:f,end:f}}}(n.maskOptions,s,l,o,a),c=u.enteredString,p=u.selection,f=u.value;if(S(r)){var h=r({value:f,selection:p},{value:o,selection:a},c,n.getBeforeMaskedValueChangeConfig());f=h.value,p=h.selection}n.setInputValue(f),S(n.props.onChange)&&n.props.onChange(e),n.isWindowsPhoneBrowser?n.setSelection(p.start,p.end,{deferred:!0}):n.setSelection(p.start,p.end)},n.onFocus=function(e){var t=n.props.beforeMaskedValueChange,a=n.maskOptions,r=a.mask,s=a.prefix;if(n.focused=!0,n.mounted=!0,r){if(n.value)h(n.maskOptions,n.value)<n.maskOptions.mask.length&&n.setCursorToEnd();else{var o=g(n.maskOptions,s),i=g(n.maskOptions,o),l=h(n.maskOptions,i),u=k(n.maskOptions,l),c={start:u,end:u};if(S(t)){var p=t({value:i,selection:c},{value:n.value,selection:null},null,n.getBeforeMaskedValueChangeConfig());i=p.value,c=p.selection}var d=i!==n.getInputValue();d&&n.setInputValue(i),d&&S(n.props.onChange)&&n.props.onChange(e),n.setSelection(c.start,c.end)}n.runSaveSelectionLoop()}S(n.props.onFocus)&&n.props.onFocus(e)},n.onBlur=function(e){var t=n.props.beforeMaskedValueChange,a=n.maskOptions.mask;if(n.stopSaveSelectionLoop(),n.focused=!1,a&&!n.props.alwaysShowMask&&f(n.maskOptions,n.value)){var r="";S(t)&&(r=t({value:r,selection:null},{value:n.value,selection:n.previousSelection},null,n.getBeforeMaskedValueChangeConfig()).value);var s=r!==n.getInputValue();s&&n.setInputValue(r),s&&S(n.props.onChange)&&n.props.onChange(e)}S(n.props.onBlur)&&n.props.onBlur(e)},n.onMouseDown=function(e){!n.focused&&document.addEventListener&&(n.mouseDownX=e.clientX,n.mouseDownY=e.clientY,n.mouseDownTime=(new Date).getTime(),document.addEventListener("mouseup",(function e(t){if(document.removeEventListener("mouseup",e),n.focused){var a=Math.abs(t.clientX-n.mouseDownX),r=Math.abs(t.clientY-n.mouseDownY),s=Math.max(a,r),o=(new Date).getTime()-n.mouseDownTime;(s<=10&&o<=200||s<=5&&o<=300)&&n.setCursorToEnd()}}))),S(n.props.onMouseDown)&&n.props.onMouseDown(e)},n.onPaste=function(e){S(n.props.onPaste)&&n.props.onPaste(e),e.defaultPrevented||(n.beforePasteState={value:n.getInputValue(),selection:n.getSelection()},n.setInputValue(""))},n.handleRef=function(e){null==n.props.children&&S(n.props.inputRef)&&n.props.inputRef(e)};var a=t.mask,r=t.maskChar,o=t.formatChars,l=t.alwaysShowMask,c=t.beforeMaskedValueChange,v=t.defaultValue,C=t.value;n.maskOptions=p(a,r,o),null==v&&(v=""),null==C&&(C=v);var E=w(C);if(n.maskOptions.mask&&(l||E)&&(E=g(n.maskOptions,E),S(c))){var x=t.value;null==t.value&&(x=v),E=c({value:E,selection:null},{value:x=w(x),selection:null},null,n.getBeforeMaskedValueChangeConfig()).value}return n.value=E,n}!function(e,t){e.prototype=Object.create(t.prototype),function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],s=Object.getOwnPropertyDescriptor(t,r);s&&s.configurable&&void 0===e[r]&&Object.defineProperty(e,r,s)}}(e.prototype.constructor=e,t)}(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.getInputDOMNode()&&(this.isWindowsPhoneBrowser=function(){var e=new RegExp("windows","i"),t=new RegExp("phone","i"),n=navigator.userAgent;return e.test(n)&&t.test(n)}(),this.maskOptions.mask&&this.getInputValue()!==this.value&&this.setInputValue(this.value))},n.componentDidUpdate=function(){var e=this.previousSelection,t=this.props,n=t.beforeMaskedValueChange,a=t.alwaysShowMask,r=t.mask,s=t.maskChar,o=t.formatChars,i=this.maskOptions,l=a||this.isFocused(),u=null!=this.props.value,c=u?w(this.props.value):this.value,d=e?e.start:null;if(this.maskOptions=p(r,s,o),this.maskOptions.mask){!i.mask&&this.isFocused()&&this.runSaveSelectionLoop();var m=this.maskOptions.mask&&this.maskOptions.mask!==i.mask;if(i.mask||u||(c=this.getInputValue()),(m||this.maskOptions.mask&&(c||l))&&(c=g(this.maskOptions,c)),m){var b=h(this.maskOptions,c);(null===d||b<d)&&(d=v(this.maskOptions,c)?b:k(this.maskOptions,b))}!this.maskOptions.mask||!f(this.maskOptions,c)||l||u&&this.props.value||(c="");var C={start:d,end:d};if(S(n)){var y=n({value:c,selection:C},{value:this.value,selection:this.previousSelection},null,this.getBeforeMaskedValueChangeConfig());c=y.value,C=y.selection}this.value=c;var I=this.getInputValue()!==this.value;I?(this.setInputValue(this.value),this.forceUpdate()):m&&this.forceUpdate();var E=!1;null!=C.start&&null!=C.end&&(E=!e||e.start!==C.start||e.end!==C.end),(E||I)&&this.setSelection(C.start,C.end)}else i.mask&&(this.stopSaveSelectionLoop(),this.forceUpdate())},n.componentWillUnmount=function(){this.mounted=!1,null!==this.selectionDeferId&&I(this.selectionDeferId),this.stopSaveSelectionLoop()},n.render=function(){var e,t=this.props,n=(t.mask,t.alwaysShowMask,t.maskChar,t.formatChars,t.inputRef,t.beforeMaskedValueChange,t.children),a=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],0<=t.indexOf(n)||(r[n]=e[n]);return r}(t,["mask","alwaysShowMask","maskChar","formatChars","inputRef","beforeMaskedValueChange","children"]);if(n){S(n)||l(!1);var s=["onChange","onPaste","onMouseDown","onFocus","onBlur","value","disabled","readOnly"],i=o({},a);s.forEach((function(e){return delete i[e]})),e=n(i),s.filter((function(t){return null!=e.props[t]&&e.props[t]!==a[t]})).length&&l(!1)}else e=r.createElement("input",o({ref:this.handleRef},a));var u={onFocus:this.onFocus,onBlur:this.onBlur};return this.maskOptions.mask&&(a.disabled||a.readOnly||(u.onChange=this.onChange,u.onPaste=this.onPaste,u.onMouseDown=this.onMouseDown),null!=a.value&&(u.value=this.value)),e=r.cloneElement(e,u)},t}(r.Component);e.exports=E},280:e=>{"use strict";e.exports=window.React},34:e=>{"use strict";e.exports=window.ReactDOM}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(280);const t=window.wp.element;var a=n(268),r=n.n(a);const{formatPrice:s}=window.wc.priceFormat,o=({optionLabel:e,finalPrice:t,value:n,extraText:a,installmentPrice:r})=>{const o=s(r),i=s(t);return 1===n?`${e} (${o})`:`${n}x ${e} ${o} (${i}) ${a}`.trim()},i=e=>e.map((e=>({label:o(e),value:e.value}))),l=(e,n,a,r,s,o,l)=>{const[u,c]=(0,t.useState)(i(e)),p=(e=>{const n=(0,t.useRef)();return(0,t.useEffect)((()=>{n.current=e})),n.current})(r);return(0,t.useEffect)((()=>{(async()=>{if(2===n&&!a||1===n&&(!p||p===r))return;o(!0);const e=parseFloat(r/100).toFixed(2).replace(".",",");try{const t=await fetch("/wp-admin/admin-ajax.php?"+new URLSearchParams({action:"xqRhBHJ5sW",flag:a,total:e}),{headers:{"X-Request-Type":"Ajax"}});if(!t.ok)return void o(!1);const n=await t.json();if(!n?.installments?.length)return void o(!1);c(i(n.installments)),s(l,1),o(!1)}catch(e){return void o(!1)}})()}),[a,r,n,c,i,s,l]),{installmentsOptions:u,filterHandler:e=>{u.filter((t=>t.label.toLowerCase().startsWith(e.toLowerCase())))},installmentsChangeHandler:e=>{s(l,e)}}},{ComboboxControl:u}=wp.components,c=({label:t,installments:n,installmentsType:a,selectedInstallment:r,setSelectedInstallment:s,brand:o,cartTotal:i,setIsLoading:c,cardIndex:p})=>{const{installmentsOptions:d,filterHandler:m,installmentsChangeHandler:f}=l(n,a,o,i,s,c,p);return(0,e.createElement)("div",{className:"wc-block-components-form pagarme-installments-combobox"},(0,e.createElement)("div",{className:"wc-block-components-combobox is-active"},(0,e.createElement)(u,{className:"wc-block-components-combobox-control",label:t,onChange:f,value:r,options:d,onFilterValueChange:m,allowReset:!1,autoComplete:"off"})))};c.propTypes={label:r().string.isRequired,installments:r().array.isRequired,installmentsType:r().number.isRequired,selectedInstallment:r().number.isRequired,setSelectedInstallment:r().func.isRequired,brand:r().string.isRequired,cartTotal:r().number.isRequired,setIsLoading:r().func.isRequired,cardIndex:r().number.isRequired};const p=c,d=({id:n,label:a,inputValue:r,setInputValue:s,cardIndex:o})=>{const[i,l]=(0,t.useState)(!1);let u="wc-block-components-text-input";return(i||r.length)&&(u+=" is-active"),(0,e.createElement)("div",{className:u},(0,e.createElement)("label",{htmlFor:n},a),(0,e.createElement)("input",{type:"text",id:n,value:r,onChange:e=>{const t=e.target.value.replace(/[^a-z ]/gi,"");s(o,t)},onFocus:()=>l(!0),onBlur:()=>{l(!1)}}))};d.propTypes={id:r().string.isRequired,label:r().string.isRequired,inputValue:r().string.isRequired,setInputValue:r().func.isRequired,cardIndex:r().number.isRequired};const m=d;var f=n(748),h=n.n(f);function v(e){return e.replace(/\s|\*/g,"")}const g=({id:n,label:a,inputValue:r,setInputValue:s,brand:o,setBrand:i,brands:l,setIsLoading:u,cardIndex:c})=>{const{brandImageSrc:p,inputChangeHandler:d,changeBrand:m}=((e,n,a,r,s,o)=>{const[i,l]=(0,t.useState)(""),u=()=>{r(o,""),l("")};return{brandImageSrc:i,inputChangeHandler:e=>{a(o,e.target.value)},changeBrand:async()=>{const t=v(e);if(16!==t.length)return void u();s(!0);const a=t.substring(0,6),i=`https://api.pagar.me/bin/v1/${a}`;try{const e=await fetch(i),t=await e.json();let c=t.brand;if(e.ok&&void 0!==t.brandName||(c=(e=>{let t="",a=null;for(const[r,s]of Object.entries(n))for(const n of s.prefixes){const s=n.toString();0===e.indexOf(s)&&t.length<s.length&&(t=s,a=r)}return a})(a)),null===c)return u(),void s(!1);if(t.brandImage)return l(t.brandImage),s(!1),void r(o,c);l(`https://cdn.mundipagg.com/assets/images/logos/brands/png/${c}.png`),s(!1),r(o,c)}catch(e){return u(),void s(!1)}}}})(r,l,s,i,u,c);return(0,e.createElement)("div",{className:"wc-block-components-text-input is-active"},(0,e.createElement)("label",{htmlFor:n},a),(0,e.createElement)(h(),{className:"pagarme-card-form-card-number",type:"text",id:n,mask:"9999 9999 9999 9999",maskChar:"*",onChange:d,value:r,alwaysShowMask:!0,onBlur:m}),p&&(0,e.createElement)("img",{src:p,alt:o}))};g.propTypes={id:r().string.isRequired,label:r().string.isRequired,inputValue:r().string.isRequired,setInputValue:r().func.isRequired,brand:r().string.isRequired,setBrand:r().func.isRequired,brands:r().array.isRequired,setIsLoading:r().func.isRequired,cardIndex:r().number.isRequired};const b=g,k=({id:n,label:a,inputValue:r,setInputValue:s,cardIndex:o,mask:i,maskChar:l=null})=>{const[u,c]=(0,t.useState)(!1);let p="wc-block-components-text-input";return(u||r.length)&&(p+=" is-active"),(0,e.createElement)("div",{className:p},(0,e.createElement)("label",{htmlFor:n},a),(0,e.createElement)(h(),{type:"text",id:n,mask:i,maskChar:l,onChange:e=>{s(o,e.target.value)},value:r,onFocus:()=>c(!0),onBlur:()=>{c(!1)}}))};k.propTypes={id:r().string.isRequired,label:r().string.isRequired,inputValue:r().string.isRequired,setInputValue:r().func.isRequired,cardIndex:r().number.isRequired,mask:r().string.isRequired,maskChar:r().string.isRequired};const w=k,S=window.wp.data,C={holderName:"",number:"",expirationDate:"",installment:1,brand:"",cvv:"",saveCard:!1},y={cards:{1:{...C},2:{...C}}},I=(0,S.createReduxStore)("pagarme-cards",{reducer(e=y,t){switch(t.type){case"SET_PROPERTY_VALUE":return 0===t.propertyName?.length?e:{...e,cards:{...e.cards,[t.cardIndex]:{...e.cards[t.cardIndex],[t.propertyName]:t.value}}};case"RESET":return y}return e},actions:{setHolderName:(e,t)=>({type:"SET_PROPERTY_VALUE",cardIndex:e,value:t,propertyName:"holderName"}),setNumber:(e,t)=>({type:"SET_PROPERTY_VALUE",cardIndex:e,value:t,propertyName:"number"}),setExpirationDate:(e,t)=>({type:"SET_PROPERTY_VALUE",cardIndex:e,value:t,propertyName:"expirationDate"}),setInstallment:(e,t)=>({type:"SET_PROPERTY_VALUE",cardIndex:e,value:t,propertyName:"installment"}),setBrand:(e,t)=>({type:"SET_PROPERTY_VALUE",cardIndex:e,value:t,propertyName:"brand"}),setCvv:(e,t)=>({type:"SET_PROPERTY_VALUE",cardIndex:e,value:t,propertyName:"cvv"}),setSaveCard:(e,t)=>({type:"SET_PROPERTY_VALUE",cardIndex:e,value:t,propertyName:"saveCard"}),reset:()=>({type:"RESET"})},selectors:{getHolderName:(e,t)=>e.cards[t].holderName,getNumber:(e,t)=>e.cards[t].number,getExpirationDate:(e,t)=>e.cards[t].expirationDate,getInstallment:(e,t)=>e.cards[t].installment,getBrand:(e,t)=>e.cards[t].brand,getCvv:(e,t)=>e.cards[t].cvv,getSaveCard:(e,t)=>e.cards[t].saveCard,getCards:e=>e.cards}});(0,S.register)(I);const E=I,{CheckboxControl:x}=window.wc.blocksComponents,O=n=>{const{billing:a,components:r,backendConfig:s,cardIndex:o}=n,{LoadingMask:i}=r,[l,u]=(0,t.useState)(!1),{setHolderName:c,setNumber:d,setExpirationDate:f,setInstallment:h,setBrand:v,setCvv:g,setSaveCard:k}=(0,S.useDispatch)(E),C=(0,S.useSelect)((e=>e(E).getHolderName(o)),[o]),y=(0,S.useSelect)((e=>e(E).getNumber(o)),[o]),I=(0,S.useSelect)((e=>e(E).getExpirationDate(o)),[o]),O=(0,S.useSelect)((e=>e(E).getInstallment(o)),[o]),R=(0,S.useSelect)((e=>e(E).getBrand(o)),[o]),V=(0,S.useSelect)((e=>e(E).getCvv(o)),[o]),P=(0,S.useSelect)((e=>e(E).getSaveCard(o)),[o]),{holderNameLabel:T,numberLabel:M,expiryLabel:D,cvvLabel:L,installmentsLabel:N,saveCardLabel:_,walletLabel:q}=s.fieldsLabels,B=e=>`pagarme_credit_card_${o}_${e}`;return(0,e.createElement)(i,{isLoading:l},(0,e.createElement)("div",{className:"wc-block-components-form"},(0,e.createElement)(m,{id:B("holder_name"),label:T,inputValue:C,setInputValue:c,cardIndex:o}),(0,e.createElement)(b,{id:B("number"),label:M,inputValue:y,setInputValue:d,brand:R,setBrand:v,brands:s.brands,setIsLoading:u,cardIndex:o}),(0,e.createElement)(w,{id:B("expiry"),label:D,mask:"99/99",inputValue:I,setInputValue:f,cardIndex:o}),(0,e.createElement)(w,{id:B("cvv"),label:L,mask:"9999",inputValue:V,setInputValue:g,cardIndex:o}),s.walletEnabled&&(0,e.createElement)(x,{label:_,checked:P,onChange:e=>{k(o,e)}})),(0,e.createElement)(p,{label:N,installments:s.installments,installmentsType:s.installmentsType,selectedInstallment:O,setSelectedInstallment:h,brand:R,cartTotal:a.cartTotal.value,setIsLoading:u,cardIndex:o}))},R=(e,t,n)=>{const a=`${e.replace("request.","")}: ${t}`;return n.hasOwnProperty(a)?n[a]:a};const{registerPaymentMethod:V}=window.wc.wcBlocksRegistry,{CheckboxControl:P}=window.wc.blocksComponents,T=wc.wcSettings.getSetting("woo-pagarme-payments-credit_card_data"),M=n=>{const{reset:a}=(0,S.useDispatch)(E),{emitResponse:r,eventRegistration:s}=n,{onPaymentSetup:o}=s,i=(0,S.useSelect)((e=>e(E).getCards()));return(0,t.useEffect)((()=>{a()}),[]),(0,t.useEffect)((()=>o((async()=>{const{holderName:e,number:t,expirationDate:n,cvv:a,brand:s,installment:o}=i[1],l=await async function(e,t,n,a,r,s){const[o,i]=n.replace(/\s/g,"").split("/"),l={card:{holder_name:t,number:v(e),exp_month:o,exp_year:i,cvv:a}};try{const e=`https://api.pagar.me/core/v5/tokens?appId=${r}`,t=await fetch(e,{method:"POST",body:JSON.stringify(l)});if(!t.ok){const e=await t.text();if(0===e.length)return{errorMessage:s.serviceUnavailable};const n=((e,t)=>{let n="";for(const a in e.errors){console.log("errorIndex",a);for(const r of e.errors[a]||[])n+=`${R(a,r,t)}<br/>`}return n})(JSON.parse(e),s);return{errorMessage:n}}return{token:(await t.json()).id}}catch(e){return{errorMessage:s.serviceUnavailable}}}(t,e,n,a,T.appId,T.errorMessages);return l.errorMessage?{type:r.responseTypes.ERROR,message:l.errorMessage}:{type:r.responseTypes.SUCCESS,meta:{paymentMethodData:{pagarme:JSON.stringify({credit_card:{cards:{1:{token:l.token,brand:s,installment:o}}}}),payment_method:"credit_card"}}}}))),[o,i,1,T]),(0,e.createElement)(O,{...n,backendConfig:T,cardIndex:1})},D=({components:t})=>{const{PaymentMethodLabel:n}=t;return(0,e.createElement)(n,{text:T.label})};D.propTypes={components:r().object.isRequired},V({name:T.name,label:(0,e.createElement)(D,null),content:(0,e.createElement)(M,null),edit:(0,e.createElement)(M,null),canMakePayment:()=>!0,ariaLabel:T.ariaLabel})})()})();